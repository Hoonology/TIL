
# Cookie
- 서버에서 클라이언트에 데이터를 저장하는 방법의 하나  
- 웹사이트에 접근 시,서버가 일방적으로 클라이언트에 전달하는 작은 데이터
- 서버가 웹 브라우저에 정보를 저장하고 불러올 수 있는 수단

</br>

## 쿠키 옵션
```http://www.localhost.com:3000/users/login```
- Domain
    - 쿠키옵션에서 도메인은 도메인 정보와 세부 경로를 포함하지 않는다. 
    - 위 주소에서 도메인은 ```localhost.com```
    
- Path
    - 위 주소에서 패스는 ```/users/login```
    - 설정된 path를 전부 만족하는 경우 요청하는 Path가 추가로 더 존재하더라도 쿠키를 서버에 전송 가능
        - Path가 /users로 설정되어 있고, 요청하는 세부 경로가 /users/login 인 경우라면 쿠키 전송이 가능합니다.
            하지만 /user/login으로 전송되는 요청은 Path 옵션을 만족하지 못하기 때문에   서버로 쿠키를 전송할 수 없습니다.
- MaxAge or Expires
    - 쿠키의 유효기간 정하는 옵션
    - 위 옵션이 지정되지 않을 경우 브라우저 탭을 닫으면 쿠키 제거
- Secure
    - 쿠키를 전송해야 할 때 사용하는 프로토콜에 따른 쿠키 전송 여부를 결정
- HttpOnly
    - 자바스크립트에서 브라우저의 쿠키에 접근 여부를 결정합니다.
만약 해당 옵션이 ```true```로 설정된 경우, 자바스크립트에서는 쿠키에 접근이 불가
- SameSite
    - Cross-Origin 요청을 받은 경우 요청에서 사용한 메소드와 해당 옵션의 조합으로 서버의 쿠키 전송 여부를 결정
        - Lax : Cross-Origin 요청이면 'GET' 메소드에 대해서만 쿠키를 전송 가능
            - 이 옵션을 사용하면 외부 사이트에서 최상위 탐색(예: 링크 클릭)을 위해 쿠키를 보낼 수 있지만 교차 사이트 POST 요청(예: 양식 제출)을 위해서는 쿠키를 보낼 수 없습니다.
        - Strict : Cross-Origin이 아닌 same-site 인 경우에만 쿠키를 전송 가능
            - 이 옵션은 최상위 탐색 및 양식 제출을 포함하여 교차 사이트 요청에서 쿠키가 전송되는 것을 방지합니다.
        - None : 항상 쿠키 전송, ```Secure``` 옵션 필요
            - 이 옵션을 사용하면 최상위 탐색 및 양식 제출을 포함하여 모든 교차 사이트 요청에서 쿠키를 보낼 수 있습니다. 그러나 CSRF(Cross-Site Request Forgery) 공격의 위험이 증가하므로 보안 HTTPS 연결과 필요한 경우에만 사용해야 합니다.

이러한 옵션들을 지정한 다음 서버에서 클라이언트로 쿠키를 처음 전송하게 된다면 헤더에 Set-Cookie라는 프로퍼티에 쿠키를 담아 쿠키를 전송하게 됩니다.

이후 클라이언트 혹은 서버에서 쿠키를 전송해야 한다면 클라이언트는 헤더에 Cookie라는 프로퍼티에 쿠키를 담아 서버에 쿠키를 전송하게 됩니다.


</br>

하지만 기본적으로는 쿠키는 오랜 시간 동안 유지될 수 있고, 자바스크립트를 이용해서 쿠키에 접근할 수 있기 때문에 쿠키에 민감한 정보를 담는 것은 위험합니다.

<br>

## miniQuiz

1. 다음 중 쿠키에 대한 설명으로 올바른 답을 고르세요.


    A.
    삭제하지 않는 한 항상 쿠키는 영원히 보존된다.


    B.
    모든 쿠키는 자바스크립트를 이용해서 접근할 수 있다.


    C.
    sameSite 옵션은 프로토콜과 상관없이 none으로 지정할 수 있다.


    ***D.
    요청하는 서버의 도메인, 경로, sameSite 등의 조건이 맞아떨어질 경우 같이 전송된다.***

<br>


2. 쿠키에서 사용할 수 있는 옵션들을 3가지 이상 적고, 각 옵션이 어떤 기능을 하는지 적으세요.  
domain - 서버와 요청의 도메인이 일치하는 경우 쿠키 전송
path - 서버의 요청의 세부 경로가 일치하는 경우 쿠키 전송
maxage/expires - 쿠키의 유효기간 설정
httpOnly - 스크립트의 쿠키 접근 가능 여부 설정
secure - HTTPS 에서만 쿠키 전송 여부 설정
sameSite - 같은 사이트에서만 쿠키를 사용할 수 있게 하는 설정

<br>

3. 쿠키의 sameSite 옵션의 설명으로 올바른 것을 모두 고르세요.


    ***A.
    Lax: 사이트가 서로 달라도, GET 요청이라면 쿠키 전송이 가능하다.***


    
    ***B.
    Strict: 사이트가 서로 다르면, 쿠키 전송을 할 수 없다.***


    ***C.
    None: 사이트가 달라도, 모든(GET, POST, PUT 등등) 요청에 대해 쿠키 전송이 가능하다.***

