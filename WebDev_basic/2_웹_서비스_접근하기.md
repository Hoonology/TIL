# 2. 웹 서비스 접근하기

# URL과 URI

### URL ( Uniform Resource Locator )

서버가 제공되는 환경에 존재하는 파일의 위치

### URI ( Uniform Resource Identifier )

브라우저의 검색창을 클릭하면 나타나는 주소, URL을 포함하는 상위개념

| 부분 | 명칭 | 설명 |
| --- | --- | --- |
| file://, http://, https:// | scheme | 통신 프로토콜 |
| 127.0.0.1, www.google.com | hosts | 웹 페이지, 이미지, 동영상 등의 파일이 위치한 웹 서버, 도메인 또는 IP |
| :80, :443, :3000 | port | 웹 서버에 접속하기 위한 통로 |
| /search, /Users/username/Desktop | url-path | 웹 서버의 루트 디렉토리로부터 웹 페이지, 이미지, 동영상 등의 파일이 위치까지의 경로 |
| q=JavaScript | query | 웹 서버에 전달하는 추가 질문 |

---

# IP, Port

## ****IP : Internet Protocol****

---

```bash
nslookup codestates.com
```

![Untitled](2%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8C%E1%85%A5%E1%86%B8%E1%84%80%E1%85%B3%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20a1dc45b236834210b0862e124ca0b646/Untitled.png)

- IPv4는 각 덩어리마다 0부터 255까지 나타낼 수 있음
    - 인터넷 보급 초기의 버전
    - 전세계 누구나 PC를 통해 인터넷 접속
    - 서비스와 서버의 생산으로 인해 IPv4의 한계치 돌파

- IPv6의 등장
    - 2^128 개의 IP 주소 표현

## Port

---

일반적으로 0에서 65535 사이의 숫자로 표시되며 네트워크 프로토콜에서 장치 간 연결을 설정하는 데 사용

- 22 : SSH
- 80 : HTTP
- 443: HTTPS
- [더 많은 포트 번호 확인하기](https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)

---

# 도메인과 DNS

## Domain name

---

웹 브라우저를 통해 특정 사이트에 진입을 할 때, IP 주소를 대신하여 사용하는 주소

`nslookup`으로 `codestates.com`의 IP 주소를 확인할 수 있습니다.

![Untitled](2%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8C%E1%85%A5%E1%86%B8%E1%84%80%E1%85%B3%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20a1dc45b236834210b0862e124ca0b646/Untitled%201.png)

## DNS ( Domain Name System ) : 인터넷 전화번호부

---

![Untitled](2%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8C%E1%85%A5%E1%86%B8%E1%84%80%E1%85%B3%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20a1dc45b236834210b0862e124ca0b646/Untitled%202.png)

[DNS란 | Cloudflare](https://www.cloudflare.com/ko-kr/learning/dns/what-is-dns/)

브라우저의 검색창에 naver.com을 입력한다면, 이 요청은 DNS에서 IP 주소(`125.209.222.142`)를 찾습니다. 그리고 이 IP 주소에 해당하는 웹 서버로 요청을 전달하여 클라이언트와 서버가 통신하도록 함

DNS 서버를 사용하면 사람이 192.168.1.1(IPv4의 경우)과 같은 IP 주소 또는 2400:cb00:2048:1::c629:d7a2(IPv6의 경우)처럼 영문과 숫자로 된 복잡한 IP 주소를 기억할 필요가 없습니다.

### DNS 조회의 8단계

---

1. 사용자가 웹 브라우저에 'example.com'을 입력하면, 쿼리가 인터넷으로 이동하고 DNS 재귀 확인자가 이를 수신합니다.
2. 이어서 확인자가 DNS 루트 이름 서버(.)를 쿼리합니다.
3. 다음으로, 루트 서버가, 도메인에 대한 정보를 저장하는 최상위 도메인(TLD) DNS 서버(예: .com 또는 .net)의 주소로 확인자에 응답합니다. example.com을 검색할 경우의 요청은 .com TLD를 가리킵니다.
4. 이제, 확인자가 .com TLD에 요청합니다.
5. 이어서, TLD 서버가 도메인 이름 서버(example.com)의 IP 주소로 응답합니다.
6. 마지막으로, 재귀 확인자가 도메인의 이름 서버로 쿼리를 보냅니다.
7. 이제, example.com의 IP 주소가 이름 서버에서 확인자에게 반환됩니다.
8. 이어서, DNS 확인자가, 처음 요청한 도메인의 IP 주소로 웹 브라우저에 응답합니다.

DNS 조회의 8단계를 거쳐 example.com의 IP 주소가 반환되면, 이제 브라우저가 웹 페이지를 요청할 수 있습니다.

1. 브라우저가 IP 주소로 [HTTP](https://www.cloudflare.com/learning/ddos/glossary/hypertext-transfer-protocol-http/) 요청을 보냅니다.
2. 해당 IP의 서버가 브라우저에서 렌더링할 웹 페이지를 반환합니다(10단계).

![Untitled](2%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8C%E1%85%A5%E1%86%B8%E1%84%80%E1%85%B3%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20a1dc45b236834210b0862e124ca0b646/Untitled%203.png)

### ****DNS 쿼리 유형****

---

1. **재귀 쿼리** - 재귀 쿼리에서는, 확인자가 레코드를 찾을 수 없는 경우, DNS 클라이언트는 DNS 서버(일반적으로 DNS 재귀 확인자)가, 요청한 자원 레코드 또는 오류 메시지를 사용하여 클라이언트에 응답하도록 요구합니다.
2. **반복 쿼리** - 이 경우, DNS 클라이언트는 DNS 서버가 가능한 최상의 응답을 반환하도록 합니다. 쿼리한 DNS 서버가 쿼리 이름과 일치하는 이름을 갖고 있지 않은 경우, 하위 수준의 도메인 네임스페이스에 대해 권한 있는 DNS 서버에 대한 참조를 반환합니다. 그러면 DNS 클라이언트가 참조 주소를 쿼리합니다. 이 프로세스는 오류 또는 제한 시간 초과가 발생할 때까지 추가 DNS 서버가 쿼리 체인을 중단한 상태로 계속됩니다.
3. **비재귀 쿼리** - 일반적으로, DNS 확인자 클라이언트의 쿼리를 받은 DNS 서버가 해당 레코드에 대한 권한이 있거나 캐시 내부에 해당 레코드를 갖고 있어, DNS 서버가 액세스 권한을 갖고 있는 레코드를 쿼리할 때 발생합니다. 일반적으로, DNS 서버는 추가 대역폭 소비 및 업스트림 서버의 부하를 방지하기 위해 DNS 레코드를 캐시합니다.

## 도메인의 구조

---

![Untitled](2%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8C%E1%85%A5%E1%86%B8%E1%84%80%E1%85%B3%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20a1dc45b236834210b0862e124ca0b646/Untitled%204.png)

[mini Quiz](2%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8C%E1%85%A5%E1%86%B8%E1%84%80%E1%85%B3%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20a1dc45b236834210b0862e124ca0b646/mini%20Quiz%20b0fe4ce518884331b94673c7afe92c48.md)