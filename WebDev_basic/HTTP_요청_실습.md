# HTTP 요청 실습

## HTTP API 테스트 도구
- 클라이언트 서버 
---

브라우저 : 웹 개발에서 사용하는 대표적인 클라이언트

- 서버에 HTTP 요청을 보낼 수 있는 훌륭한 도구
- 주로 웹 페이지를 받아오는 GET 요청에 사용

### **HTTP API 테스트 도구 (GUI)**

- [**Postman**](https://www.postman.com/)
- [Insomnia](https://insomnia.rest/)

## **Postman 사용하기**

---

HTTP로 소통하기 위해서는 API 서버의 endpoint가 URL로 주어져야 한다. 예를 들어, 다음과 같은 API 문서가 있다고 가정한다.

****GET 요청****

> **URL**
> 
> 
> `http://15.164.19.32:8000/api/cozmessages/`
> 
> **메시지 조회**
> 
> **Request**
> 
> ```
> 1 GET /kimcoding/messages
> ```
> 
>                                      [요청] kimcoding이 작성한 모든 메시지를 조회합니다.
> 
> 추가적인 파라미터를 사용할 수 있습니다.
> 
> | parameter | 형식 | 설명 | 필수 포함 여부 |
> | --- | --- | --- | --- |
> | roomname | 방 이름(문자열) | 특정 roomname만 조회 | 필수 아님 |
> 
>                                    [표] 파라미터 정보
> 
> **Response**
> 
> 응답은 다음과 같은 JSON 형식입니다.
> 
> ```json
> [
>   {
>     "id": 1,
>     "username": "김코딩",
>     "text": "안녕하세요",
>     "roomname": "로비",
>     "date": "2021-04-02 12:00:00"
>   }
>  // ...여러 개의 메시지
> ]
> ```
> 
>                                    [데이터] Request에 따른 Response 예시
> 
> 메시지에서 사용하는 속성은 다음과 같습니다.
> 
> | parameter | 형식 | 설명 |
> | --- | --- | --- |
> | id | 숫자 | 고유한 아이디 |
> | username | 문자열 | 사용자 이름 |
> | text | 문자열 | 본문 내용 |
> | roomname | 문자열 | 방 이름 |
> | date | 문자열 | 작성한 시간 |
> 
>                                   [표] 파라미터 정보
> 

### Postman 화면 설명

![Untitled.png](HTTP%20%E1%84%8B%E1%85%AD%E1%84%8E%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%205dc03dd48aa44ea0b315bb7cc5626e88/Untitled.png)

### **POST 요청하기**

GET 요청은 브라우저로도 충분히 테스트할 수 있습니다. POST 요청은 GET 요청과 다르게 **본문(body)**를 포함하는 경우가 많습니다.

본문을 설정하는 방법은, 위 그림에서 **(5)번 - HTTP 요청 설정 화면** 에서 본문을 입력하면 됩니다. POST를 사용하는 API 문서를 먼저 확인해 봅시다.

> **URL**
> 
> 
> `http://15.164.19.32:8000/api/cozmessages/`
> 
> **PATH**
> 
> `http://15.164.19.32:8000/api/cozmessages/{githubId}/messages`
> 
> **메시지 추가**
> 
> **Request**
> 
> ```
> 1 POST /kimcoding/messages
> ```
> 
> [요청] kimcoding이 새로운 message를 작성합니다.
> 
> 요청 본문에는 다음의 내용을 반드시 포함해야 합니다.
> 
> - 요청 형식: JSON
> 
> | parameter | 형식 | 설명 | 필수 포함 여부 |
> | --- | --- | --- | --- |
> | username | 문자열 | 사용자 이름 | 필수 |
> | text | 문자열 | 본문 내용 | 필수 |
> | roomname | 문자열 | 방 이름 | 필수 |
> 
> **Response**
> 
> 응답은 다음과 같은 JSON 형식입니다.
> 
> ```
> {
>   "id": 5
> }
> ```
> 
> [데이터] Request에 따른 Response 예시
> 
> id는 숫자 형식이며, 새로 생성된 메시지의 고유한 ID 값입니다.
> 

GET → POST 변경

![스크린샷 2023-03-17 12.38.25.png](HTTP%20%E1%84%8B%E1%85%AD%E1%84%8E%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%205dc03dd48aa44ea0b315bb7cc5626e88/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-03-17_12.38.25.png)

![스크린샷 2023-03-17 12.38.33.png](HTTP%20%E1%84%8B%E1%85%AD%E1%84%8E%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%205dc03dd48aa44ea0b315bb7cc5626e88/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-03-17_12.38.33.png)

GET을 누르면,

![스크린샷 2023-03-17 12.39.20.png](HTTP%20%E1%84%8B%E1%85%AD%E1%84%8E%E1%85%A5%E1%86%BC%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%205dc03dd48aa44ea0b315bb7cc5626e88/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-03-17_12.39.20.png)