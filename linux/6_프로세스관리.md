# 6. 프로세스 관리

## 프로그램과 프로세스

---

### 프로그램

사용자가 원하는 일을 처리 할 수 있도록 프로그래밍 언어를 사용하여 수행절차를 표현해 놓은 명령어들의 집합 ( 정적인 상태 )

### 프로세스

컴퓨터에서 실행되고 있는 프로그램

- 포그라운드
    - 사용자가 입력한 명령이 실행되어 결과가 출력될 때까지 기다려야 하는 방식
    
    ```bash
    # 포그라운드 방식
    command
    ping google.com
    ```
    
    ![스크린샷 2023-03-14 14.59.58.png](6%20%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5%20cec634ea1a574aadbb282b77bb6b2bdf/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-03-14_14.59.58.png)
    
- 백그라운드
    - 프로세스가 실행되는 동안 뒤에서 다른 프로세스가 실행
    - 명령의 실행 시간이 많이 걸릴 것으로 예상되거나, 명령을 실행한 후 다른 작업을 해야할 경우 사용
    - 백그라운드 방식은 명령어 뒤에 `&`
    를 붙여서 실행하고, 다른 명령어를 추가적으로 입력
    - 작업시간이 오래 걸리는 작업인 경우 `nohup`
     명령어를 이용하여 백그라운드로 실행하면 사용자의 터미널 세션이 종료되어도 작업이 종료될 때까지 프로세스를 실행

```bash

# 백그라운드 방식 -- &추가
command &
ping google.com &

# nohup 커맨드(no hang up)
nohup command &
nohup ping google.com &
```

![Untitled](6%20%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5%20cec634ea1a574aadbb282b77bb6b2bdf/Untitled.png)

> 크롬 브라우저 두 개 실행 = 두 개의 프로세스
> 

## 프로세스 목록 확인

---

### ps

현재 실행중인 프로세스 목록 확인

- PID : 프로세스 번호
- TTY : 프로세스가 실행된 터미널의 종류와 번호
- TIME : 프로세스 실행 시간
- CMD : 실행되고 있는 프로그램의 이름( 명령 )

![스크린샷 2023-03-13 10.34.03.png](6%20%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5%20cec634ea1a574aadbb282b77bb6b2bdf/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-03-13_10.34.03.png)

- **UNIX 방식**
    - **`ps -e`** : 시스템에서 실행 중인 모든 프로세스의 정보를 출력한다.
    - **`ps -f`** : 프로세스의 자세한 정보를 출력합니다.
        - UID : 프로세스를 실행한 사용자 ID
        - PPID : 부모 프로세스 번호
        - C : CPU 사용량(%)
        - STIME : 프로세스의 시작 날짜나 시간
        - TTY : 프로세스가 실행된 터미널의 종류와 번호
        - STAT : 프로세스 상태
    - **`ps -u uid`** : uid로 특정한 사용자에 대한 모든 프로세스의 정보를 출력한다.
    - **`ps -p pid`** : pid로 지정한 특정 프로세스의 정보를 출력한다.
- **BSD 방식**
    - **`ps a`** : 터미널에서 실행한 프로세스의 정보를 출력한다.
    - **`ps u**` : 프로세스 소유자의 이름, CPU 사용량, 메모리 사용량 등 상세 정보를 출력한다.
        - %CPU : CPU 사용량(%)
        - %MEM : 물리적 메모리 사용량(%)
        - RSS : 사용하고 있는 물리적 메모리의 크기(kb)
        - VSZ : 사용하고 있는 가상 메모리의 크기(kb)
        - START : 프로세스 시작 시간
    - **`ps x`** : 시스템에서 실행 중인 모든 프로세스의 정보를 출력한다.
    
    `ps -ef` : 시스템에서 실행중인 모든 프로세스 나열
    
    ## 프로세스 관리 - `kill`
    
    ---
    
    터미널에서 프로그램이 실행되고 있을 때,  `Ctrl + c` 을 통해 프로세스를 종료
    
    → 특정 프로세스에 작업 중지, 실행 종료, 대기, 재시작, 강제 종료 등의 시그널을 전달하기 위해서 `kill`명령을 사용
    
    ```bash
    kill -시그널번호(시그널명) %작업번호
    kill -시그널번호(시그널명) PID
    ```
    
    ## 프로세스 관리 - `jobs`
    
    ---
    
    백그라운드에서 수행 중인 프로세스는 `jobs` 명령으로 확인 가능 
    
    ![쉘 스크립트를 편집하기위해 vim 프로그램을 백그라운드에서 실행하고, sample2.sh도 연달아 백그라운드에서 실행](6%20%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5%20cec634ea1a574aadbb282b77bb6b2bdf/Untitled%201.png)
    
    쉘 스크립트를 편집하기위해 vim 프로그램을 백그라운드에서 실행하고, sample2.sh도 연달아 백그라운드에서 실행
    
- `[1]`혹은 `[2]`라고 되어 있는 기호는 작업 번호
- `+` 기호로 표시된 프로세스는 현재 처리되고 있는 작업을 의미하며, `-`기호는 다음에 작업할 프로세스
- Running : 실행 중
- Stopped : 일시 중단(Ctrl + Z 입력)
- Terminated : 강제 종료(kill 명령 종료)
- Done : 정상 종료

다수의 프로세스가 백그라운드에서 작업하는 도중에 필요하다면, fg %작업번호 명령을 사용하여 

포그라운드로 전환

### 스레드

### 멀티 스레드

하나의 스레드는 코드가 실행되는 하나의 흐름

한 프로세스 내에 스레드가 두 개라면 코드가 실행되는 흐름이 두 개 생긴다는 의미

애플리케이션 내부에서의 멀티 태스킹

대용량 데이터의 처리시간을 줄이기 위해 데이터를 분할하여 병렬로 처리하는 데에 사용

![Untitled](6%20%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5%20cec634ea1a574aadbb282b77bb6b2bdf/Untitled%202.png)

[mini Quiz](6%20%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5%20cec634ea1a574aadbb282b77bb6b2bdf/mini%20Quiz%201509eeeeb0a845afbde8b3a82a611a51.md)