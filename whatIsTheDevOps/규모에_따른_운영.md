# 규모에 따른 운영

> Plan → Code → Build → Test → Release → **Deploy** → Operate
> 

---

애플리케이션의 배포 : 서비스의 형태 → 웹 애플리케이션으로 배포 ( 인터넷 연결 )

<br>


> 데브옵스
어플리케이션 아키텍처 구성( 개발 영역 ) 
규모 확장 ( 운영 영역 )
> 

<br>

### 서버

- **사용자 관점**

URL 을 통해 접속

- **서버관점**

경로 처리( 도메인 이름 후에 등장하는 문자열 처리 → (naver.om/news/…))

**한 대의 서버만 있다면 …**

- 인프라 문제 발생
- 트래픽 발생
- 여러 자원 수집이 필요한 페이지
- 복잡한 알고리즘 ( 인공지능, 빅데이터 등 )

위와 같은 문제가 발생하기 때문에 **규모 확장**과 **분산 시스템**을 도입해야한다.

<br>

# 규모확장

> Plan → Code → Build → Test → Release → **Deploy** → Operate
> 

---

## 수직 확장 VS 수평 확장

(**규모확장, 시스템 또는 애플리케이션의 기능을 향상시키는 두 가지 접근 방식)**

- 수직 확장 : 용량을 늘리기 위해 단일 서버 또는 노드에 더 많은 리소스를 추가하는 작업
    - 트래픽에 취약하다.
    - 장애 대응이 어렵다.
    - 단일 서버를 얼마나 확장할 수 있는지에 대한 실질적인 제한이 있다. → 더 많은 리소스를 추가하는 비용이 커진다.

- 수평 확장 : 용량을 늘리기 위해 시스템에 더 많은 서버 또는 노드를 추가하는 작업
    - 필요에 따라 새 서버를 추가할 수 있으므로 거의 무제한의 확장성을 제공
    - 분산 시스템을 관리하기 위해 추가 하드웨어 및 소프트웨어가 필요하므로 구현하기가 더 복잡하다.
        - 기술적인 한계가 아닌, 트래픽을 분산시켜주는 소프트웨어 구현이 어렵다.
    - 일부 응용 프로그램은 분산 환경에서 작동하도록 설계되지 않아 수평 확장을 구현하기가 더 어려울 수 있다.
    - 수평 확장 시 적용 사항
        - 업데이트 및 패치
        - 리소스 제공
        - 프로비저닝
            - 사용자의 요구에 맞게 시스템 자원을 할당, 배치, 배포해 두었다가 필요 시 시스템을 즉시 사용할 수 있는 상태로 미리 준비해 두는 것을 말한다
        - 설정
        - 배포

<br>

# 분산 시스템

> Plan → Code → Build → Test → Release → **Deploy** → Operate
> 

( 구성 요소(* 물리적인 하드웨어 위에 돌아가는 프로그램) 가 네트워크로 연결된 서로 다른 컴퓨터에 있는 시스템 - 메시지를 서로 전달/통신하고 작업을 조정 )

- 노드 : 각기 다른 시스템에 돌아가는 각 프로그램
- 분산 시스템 : 노드의 조합

-  성능 Performance : 시스템이 속도와 양 측면에서 얼마나 잘 수행되는지를 나타낸다.
-  확장성 Scalability : 증가하는 워크로드를 처리하고 그에 따라 확장할 수 있는 시스템의 기능을 의미한다.
-  가용성 Availability : 시스템을 정상적으로 사용할 수 있는 정도를 나타낸다.
    -  가용성 = 업타임 / ( 업타임 + 다운타임 )
        - 업타임 : 작동중인 시간
        - 다운타임 : 작동중이지 않은 시간

- **성능**이 좋다 : 처리량이 좋다. ( 경력 10년차 캐셔 )
- **확장성**이 좋다 : 많은 사용자들의 요청에 대응할 수 있다.
- **가용성**이 좋다 : 전체 시간 대비 사용 가능한 시간 비율이 높다.


<br>

## 분산 시스템의 장점

1. 확장성: 분산 시스템은 네트워크에 더 많은 시스템을 추가하여 수평적으로 확장할 수 있습니다. 이를 통해 워크로드가 증가함에 따라 더 많은 리소스를 추가할 수 있으므로 더 많은 양의 데이터 또는 요청을 더 쉽게 처리할 수 있습니다.
2. 내결함성: 분산 시스템은 장애에 대한 복원력을 갖도록 설계할 수 있습니다. 한 시스템에 장애가 발생하면 워크로드를 네트워크의 다른 시스템으로 분산하여 시스템이 계속 작동하도록 할 수 있습니다.
3. 고가용성: 여러 시스템에 워크로드를 분산하여 시스템에서 고가용성을 제공할 수 있습니다. 시스템 하나가 고장나더라도 시스템은 계속 작동하여 사용자가 중단 없이 시스템에 액세스할 수 있습니다.
4. 유연성: 분산 시스템은 필요에 따라 새로운 하드웨어 및 소프트웨어 구성 요소를 통합할 수 있도록 유연하게 설계할 수 있습니다. 이를 통해 변화하는 요구 사항과 기술에 더 쉽게 적응할 수 있습니다.
5. 비용 효율성: 분산 시스템은 상용 하드웨어 및 소프트웨어 구성 요소를 사용하여 구축할 수 있으므로 비용 효율적일 수 있습니다. 이는 시스템 구축 및 유지 관리의 전체 비용을 줄이는 데 도움이 될 수 있습니다.

<br>

## 수평 확장

수십대의 서버에 보안 패치, 애플리케이션 버전 관리, 업데이트 → 복잡한 과정 반복 → **자동화 필요**

- 수평 확장 시 적용 사항
    - 업데이트 및 패치
    - 리소스 제공
    - **프로비저닝 ( 서비스가 돌아갈 수 있게 판을 깔아 놓는 작업 )**
        - 사용자의 요구에 맞게 시스템 자원을 할당, 배치, 배포해 두었다가 필요 시 시스템을 즉시 사용할 수 있는 상태로 미리 준비해 두는 것을 말한다.
        - 종류
            1. 수동 프로비저닝 (Manual Provisioning): 수동으로 모든 설정을 수행하는 방법입니다. 이 방법은 간단하지만, 사람의 실수가 발생할 수 있으며, 대규모 시스템에서는 비효율적입니다.
            2. 자동 프로비저닝 (Automated Provisioning): 자동으로 시스템을 설정하는 방법입니다. 자동화된 프로비저닝 방법으로는 스크립트를 사용하는 방법이 가장 일반적입니다.
            3. 컨테이너 기반 프로비저닝 (Container-based Provisioning): 컨테이너를 사용하여 애플리케이션을 실행하고 관리하는 방법입니다. 대표적인 예로는 Docker가 있습니다.
            4. **클라우드 기반 프로비저닝 (Cloud-based Provisioning): 클라우드 서비스를 사용하여 시스템을 설정하는 방법입니다. 대표적인 예로는 AWS, GCP, Azure 등이 있습니다.**
            5. 인프라스트럭처 자동화 (Infrastructure as Code, IaC): 코드로 인프라를 관리하고 프로비저닝하는 방법입니다. 대표적인 예로는 **Terraform**, **Ansible**, Puppet, Chef 등이 있습니다.
    - 설정
    - 배포

<br>

# 자동화

수평확장을 하게 되면 패치 업데이트 등을 모든 컴퓨터에 해줘야 하기 때문에 자동화가 필수적입니다.

> Plan → Code → Build → Test → Release → Deploy → Operate
> 

### IT 인프라 자동화 툴

- 고수준 작업처리 자동화
    - **Ansible** : SSH 프로토콜을 사용하는 에이전트 없는 자동화에 사용되는 IT 자동화 도구입니다. YAML 기반 인프라 코드를 사용하여 인프라를 관리합니다. 즉, Ansible로 관리하려는 노드에 소프트웨어를 설치할 필요가 없습니다. Ansible은 배우기 쉽고 구문이 간단합니다.
    - **Puppet** : 코드 기반 인프라 자동화를 수행하는 매우 유연하고 확장 가능한 오픈 소스 IT 자동화 도구입니다. 코드는 Puppet DSL 또는 Ruby로 작성됩니다. Puppet은 널리 사용되며 대규모 사용자 커뮤니티를 보유하고 있습니다.
    - **Chef** : Ruby로 작성된 DSL을 사용하여 인프라를 구성하고 유지 관리하는 또 다른 오픈 소스 IT 자동화 도구입니다. Chef는 유연하고 확장 가능하며 모든 규모의 인프라를 관리하는 데 사용할 수 있습니다.
    - **k8s**
        - 애플리케이션 배포 및 관리 자동화
        - 대규모 인프라 관리 → 서버가 많으면 많을수록 유리합니다.
    - **Terraform** : 인프라를 코드로 정의, 구성 및 관리하는 데 사용되는 클라우드 지원 인프라 자동화 도구입니다. HCL(HCL2) 기반 인프라 코드를 사용하여 인프라를 관리합니다. Terraform은 사용하기 쉽고 다른 도구와 통합할 수 있습니다.
    - **Jenkins** : 빌드, 테스트 및 배포 프로세스를 자동화하는 데 사용되는 CI(지속적인 통합) 및 CD(지속적인 배포) 도구입니다. Jenkins는 고도로 구성 가능하며 다양한 플러그인과 함께 사용할 수 있습니다.
    - **Docker** : 애플리케이션 개발, 배포 및 실행에 사용되는 컨테이너 기반 가상화 플랫폼입니다. Docker는 개발자가 애플리케이션을 쉽게 개발하고 신속하게 배포할 수 있도록 지원합니다.
- 저수준 작업처리 자동화
    - Shell Script
        - 서버 구성 자동화, 특정 구성요소 변경, 알람 스크립트
    - Python : 클라우드 인프라를 자동화할 수 있는 다양한 라이브러리 생태계가 존재합니다.

<br>

# 모니터링과 로그

> Plan → Code → Build → Test → Release → Deploy → Operate
> 

목적 : 시간 경과에 따라 시스템, 애플리케이션, 네트워크 또는 인프라의 성능과 상태를 관찰하고 추적하는 것입니다. 모니터링의 주요 목표는 시스템이 예상대로 작동하는지 확인하고 발생할 수 있는 문제를 감지하고 식별합니다.

- 고가용성 달성 목적
- 사용량 추적 → 가설 검증 → 개선
- 장기적인 트렌드 분석
- 시간의 경과 및 실험 그룹 간의 비교
- 경고 : 인프라의 어떤 부분이 이상이 있는지 검토

주요 메트릭은

- 한 대의 서버일 경우 리눅스를 통해 측정 가능합니다.
- 클러스터 형태, 여러 대의 노트로 구성된 인프라의 경우
    - 모니터링 전문 도구를 통해 수집
    - Prometheus : 오픈 소스 모니터링

<br>
<br>

# DevOps는 얕고 넓게 아는 사람들을 채용한다.

이는 개발과 운영의 경계를 허물고, 빠른 시간에 안정적인 배포를 위해 다양한 기술과 도구를 활용해야 하기 때문입니다.